<div class="container text-center">
    <div class="row py-2">
        <div class="col"></div>
        <div class="col-8">
            <div class="row">
                <div class="col">
                    <a class="btn btn-primary text-nowrap" href="#" role="button"><p class="m-auto">Make new post</p></a>
                </div>
                <div class="col"></div>
                <div class="col">
                </div>
            </div>
        </div>
        <div class="col"></div>
    </div>
<article class="">
    <div class="container-fluid">
        <div class="row py-1">
            <div class="col"></div>
            <div class="col-10 rounded-1 m-0 p-0 shadow p-0 mb-5 bg-body rounded">
                <div class="container-fluid m-0 p-0">
                    <div class="d-flex flex-column">
                        <!-- Post title -->
                        <h2 class="mt-3 m-auto">{{post.title}}</h2>
                        <div class="d-flex flex-row py-1">
                            <div class="ps-3 mx-0">
                                <!-- Post author -->
                                <p class="text-nowrap">Posted by <a id="profileLink" href="#" routerLink="/users/{{user.id}}" routerLinkActive="active-link"
                                        style="text-decoration: none;" class="text-nowrap" href="">{{ user.username }}</a></p>
                            </div>
                            <div class="pe-3 mx-1 mx-auto flex-fill">
                                <!-- Post date -->
                                <p class="text-nowrap text-end">{{post.post_date}}</p>
                            </div>
                        </div>
                        <!-- Post content -->
                        <p class="h-auto m-auto">{{post.post_description}}</p>
                        <img class="img-fluid border border-dark border-5 rounded-1 m-2"
                            src="{{post.post_image}}">
                        <div class="container-fluid border-top border-5 border-dark p-2">
                            <div class="d-flex flex-row justify-content-between align-items-center">
                                <div class="col align-content-start ms-4">
                                    <!-- Comments amount -->
                                    <p class="h4">{{ comments.length }} comments</p>
                                </div>
                                <div class="col">
                                    <a id="editBtn" type="button" href="#" routerLink="posts/edit/{{post.id}}" routerLinkActive="active-link"
                                    class="btn btn-primary align-self-center m-auto">Edit post</a>
                                </div>
                                <div class="col d-flex flex-row justify-content-end align-items-center me-4">
                                    <!-- Positive rating -->
                                    <p class="h4 me-2">{{post.post_upvote}}</p>
                                    <button id="upvoteBtn" onClick="upVote()" class="btn" type="submit">
                                        <i class="fa-solid fa-caret-up fa-3x mx-1" ></i>
                                    </button>
                                    <button id="downvoteBtn" onClick="downVote()" class="btn" type="submit">
                                        <i class="fa-solid fa-caret-down fa-3x mx-1"></i>
                                    </button>
                                    <!-- Negative rating -->
                                    <p class="h4 ms-2">{{post.post_downvote}}</p>
                                </div>
                            </div>
                        </div>
                        <!-- Tags -->
                        <div class="container">
                        <div class="row">
                            <div class="d-flex flex-row flex-wrap m-1 h-auto p-0 w-auto border-bottom border-5 border-dark pb-2 col" *ngFor="let tag of tags">
                                <button class="btn btn-secondary text-nowrap me-1 flex-shrink-1 m-0 p-1 col" (click)="searchForPosts(tag)" value="{{ tag.title }}">#{{ tag.title }}</button>
                            </div>
                        </div>
                        </div>
                        <div class="d-flex flex-column w-100 " >
                            <div class="container ms-0 border-bottom border-dark border-opacity-50 " *ngFor="let singleComment of comments; index as i">
                                <div class="d-flex flex-row">
                                    <p class="h6 mb-0 text-start m-a text-start">
                                        <!-- Comment author -->
                                        <a id="profileLink" role="button"
                                        style="text-decoration: none;" class="text-nowrap" href="#" routerLink="/users/{{commentUsers[i].id}}" routerLinkActive="active-link">
                                            <p class="h6">{{ commentUsers[i]?.username }}</p>
                                        </a>
                                    </p>
                                    <!-- Commet date -->
                                    <p class="h6 ms-5"> {{ singleComment.comment_date }}</p>
                                </div>
                                <!-- Comment text -->
                                <p class="text-start m-auto mb-1">{{ singleComment.comment_text }}</p>
                            </div>
                            <div class="container-flud m-3">
                                <form #commentForm="ngForm" (ngSubmit)="sendComment(commentForm.value)" class="form-group" method="POST" action="" >
                                    <p for="comment" class="h5 mb-2 text-nowrap border-top border-dark border-opacity-10 text-start">Leave comment</p>
                                    <textarea [(ngModel)]="newComment.comment_text" name="comment" class="border border-dark border-2 form-control" placeholder="Type in your comment."
                                            rows="3"></textarea>
                                    <button type="submit" class=" mt-3 btn btn-primary">Submit</button>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col"></div>
        </div>
    </div>
</article>
